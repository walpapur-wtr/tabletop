{"ast":null,"code":"//Home-page.jsx\nimport React,{useEffect,useState}from\"react\";import{useNavigate}from\"react-router-dom\";import HeaderComponent from\"../components/Header-component\";import FooterComponent from\"../components/Footer-component.jsx\";import CharacterCard from\"../Character/CharacterCard-component.jsx\";import DiceRollerButton from\"../components/DiceRollerButton.jsx\";import\"../styles/Home-styles.css\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const HomePage=()=>{const[characters,setCharacters]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[isAuthenticated,setIsAuthenticated]=useState(false);const navigate=useNavigate();useEffect(()=>{const token=localStorage.getItem(\"token\");setIsAuthenticated(!!token);const fetchCharacters=async()=>{try{const response=await fetch(\"/api/characters\",{headers:token?{\"Authorization\":\"Bearer \".concat(token)}:{}});if(!response.ok){if(response.status===401||response.status===403){// Для неавторизованих користувачів показуємо порожній список\nsetCharacters([]);}else{throw new Error(\"Failed to fetch characters\");}}else{const data=await response.json();setCharacters(data.characters||[]);}}catch(err){console.error(\"Error fetching characters:\",err);setError(err.message);}finally{setLoading(false);}};fetchCharacters();},[]);const handleCreateCharacter=()=>{if(!isAuthenticated){navigate(\"/login\");}else{navigate(\"/create-character\");}};const renderContent=()=>{if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading characters...\"});}if(error){return/*#__PURE__*/_jsxs(\"div\",{className:\"error\",children:[\"Error: \",error]});}return/*#__PURE__*/_jsx(\"div\",{className:\"character-grid\",children:characters.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"welcome-section\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u041B\\u0430\\u0441\\u043A\\u0430\\u0432\\u043E \\u043F\\u0440\\u043E\\u0441\\u0438\\u043C\\u043E \\u0434\\u043E Character Sheet Manager!\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u0422\\u0443\\u0442 \\u0432\\u0438 \\u043C\\u043E\\u0436\\u0435\\u0442\\u0435 \\u0441\\u0442\\u0432\\u043E\\u0440\\u044E\\u0432\\u0430\\u0442\\u0438 \\u0442\\u0430 \\u043A\\u0435\\u0440\\u0443\\u0432\\u0430\\u0442\\u0438 \\u0432\\u0430\\u0448\\u0438\\u043C\\u0438 \\u0456\\u0433\\u0440\\u043E\\u0432\\u0438\\u043C\\u0438 \\u043F\\u0435\\u0440\\u0441\\u043E\\u043D\\u0430\\u0436\\u0430\\u043C\\u0438.\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCreateCharacter,className:\"create-character-button\",children:isAuthenticated?\"Створити персонажа\":\"Увійдіть щоб створити персонажа\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[characters.map(character=>/*#__PURE__*/_jsx(CharacterCard,{character:character,isAuthenticated:isAuthenticated},character.id||character.name)),isAuthenticated&&/*#__PURE__*/_jsx(\"div\",{className:\"character-card create-character\",onClick:handleCreateCharacter,children:/*#__PURE__*/_jsxs(\"div\",{className:\"create-character-content\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"plus-icon\",children:\"+\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u0421\\u0442\\u0432\\u043E\\u0440\\u0438\\u0442\\u0438 \\u043D\\u043E\\u0432\\u043E\\u0433\\u043E \\u043F\\u0435\\u0440\\u0441\\u043E\\u043D\\u0430\\u0436\\u0430\"})]})})]})});};return/*#__PURE__*/_jsxs(\"div\",{className:\"home-page\",children:[/*#__PURE__*/_jsx(HeaderComponent,{}),/*#__PURE__*/_jsx(\"div\",{className:\"home-page__content\",children:renderContent()}),/*#__PURE__*/_jsx(DiceRollerButton,{}),/*#__PURE__*/_jsx(FooterComponent,{})]});};export default HomePage;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","HeaderComponent","FooterComponent","CharacterCard","DiceRollerButton","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","HomePage","characters","setCharacters","loading","setLoading","error","setError","isAuthenticated","setIsAuthenticated","navigate","token","localStorage","getItem","fetchCharacters","response","fetch","headers","concat","ok","status","Error","data","json","err","console","message","handleCreateCharacter","renderContent","className","children","length","onClick","map","character","id","name"],"sources":["/home/mbohach/Документи/personal/tabletop/src/pages/Home-page.jsx"],"sourcesContent":["//Home-page.jsx\nimport React, { useEffect, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport HeaderComponent from \"../components/Header-component\";\nimport FooterComponent from \"../components/Footer-component.jsx\";\nimport CharacterCard from \"../Character/CharacterCard-component.jsx\";\nimport DiceRollerButton from \"../components/DiceRollerButton.jsx\";\nimport \"../styles/Home-styles.css\";\n\nconst HomePage = () => {\n  const [characters, setCharacters] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    const token = localStorage.getItem(\"token\");\n    setIsAuthenticated(!!token);\n\n    const fetchCharacters = async () => {\n      try {\n        const response = await fetch(\"/api/characters\", {\n          headers: token ? {\n            \"Authorization\": `Bearer ${token}`\n          } : {}\n        });\n\n        if (!response.ok) {\n          if (response.status === 401 || response.status === 403) {\n            // Для неавторизованих користувачів показуємо порожній список\n            setCharacters([]);\n          } else {\n            throw new Error(\"Failed to fetch characters\");\n          }\n        } else {\n          const data = await response.json();\n          setCharacters(data.characters || []);\n        }\n      } catch (err) {\n        console.error(\"Error fetching characters:\", err);\n        setError(err.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchCharacters();\n  }, []);\n\n  const handleCreateCharacter = () => {\n    if (!isAuthenticated) {\n      navigate(\"/login\");\n    } else {\n      navigate(\"/create-character\");\n    }\n  };\n\n  const renderContent = () => {\n    if (loading) {\n      return <div className=\"loading\">Loading characters...</div>;\n    }\n\n    if (error) {\n      return <div className=\"error\">Error: {error}</div>;\n    }\n\n    return (\n      <div className=\"character-grid\">\n        {characters.length === 0 ? (\n          <div className=\"welcome-section\">\n            <h2>Ласкаво просимо до Character Sheet Manager!</h2>\n            <p>Тут ви можете створювати та керувати вашими ігровими персонажами.</p>\n            <button \n              onClick={handleCreateCharacter} \n              className=\"create-character-button\"\n            >\n              {isAuthenticated ? \"Створити персонажа\" : \"Увійдіть щоб створити персонажа\"}\n            </button>\n          </div>\n        ) : (\n          <>\n            {characters.map((character) => (\n              <CharacterCard \n                key={character.id || character.name} \n                character={character} \n                isAuthenticated={isAuthenticated}\n              />\n            ))}\n            {isAuthenticated && (\n              <div className=\"character-card create-character\" onClick={handleCreateCharacter}>\n                <div className=\"create-character-content\">\n                  <span className=\"plus-icon\">+</span>\n                  <p>Створити нового персонажа</p>\n                </div>\n              </div>\n            )}\n          </>\n        )}\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"home-page\">\n      <HeaderComponent />\n      <div className=\"home-page__content\">\n        {renderContent()}\n      </div>\n      <DiceRollerButton />\n      <FooterComponent />\n    </div>\n  );\n};\n\nexport default HomePage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}