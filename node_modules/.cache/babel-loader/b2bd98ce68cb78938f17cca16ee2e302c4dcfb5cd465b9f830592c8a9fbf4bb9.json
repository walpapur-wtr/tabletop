{"ast":null,"code":"import _objectSpread from\"/home/mbohach/\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u0438/personal/tabletop/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from\"react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CustomForm=_ref=>{let{sections}=_ref;const[formData,setFormData]=useState({});const handleInputChange=(e,sectionName)=>{const{name,value}=e.target;setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[sectionName]:_objectSpread(_objectSpread({},prev[sectionName]),{},{[name]:value})}));};const saveCharacter=()=>{const token=localStorage.getItem(\"token\");// Retrieve token\nfetch(\"/api/characters\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(token)// Include token in the header\n},body:JSON.stringify({system:\"custom\",sections:formData})}).then(res=>res.json()).then(data=>{console.log(\"Character saved:\",data);window.location.href=\"/character/\".concat(data.character.id);}).catch(err=>console.error(\"Error saving character:\",err));};return/*#__PURE__*/_jsxs(\"div\",{className:\"custom-form\",children:[sections.map(section=>/*#__PURE__*/_jsxs(\"div\",{className:\"custom-form__section\",children:[/*#__PURE__*/_jsx(\"h2\",{children:section.name}),section.fields.map(field=>{var _formData$section$nam;return/*#__PURE__*/_jsxs(\"div\",{className:\"custom-form__field\",children:[/*#__PURE__*/_jsx(\"label\",{children:field.label}),/*#__PURE__*/_jsx(\"input\",{type:field.type,name:field.name,value:((_formData$section$nam=formData[section.name])===null||_formData$section$nam===void 0?void 0:_formData$section$nam[field.name])||\"\",onChange:e=>handleInputChange(e,section.name),required:field.required})]},field.name);})]},section.name)),/*#__PURE__*/_jsx(\"div\",{className:\"custom-form__navigation\",children:/*#__PURE__*/_jsx(\"button\",{onClick:saveCharacter,className:\"save-button\",children:\"\\u0417\\u0431\\u0435\\u0440\\u0435\\u0433\\u0442\\u0438\"})})]});};export default CustomForm;","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","CustomForm","_ref","sections","formData","setFormData","handleInputChange","e","sectionName","name","value","target","prev","_objectSpread","saveCharacter","token","localStorage","getItem","fetch","method","headers","Authorization","concat","body","JSON","stringify","system","then","res","json","data","console","log","window","location","href","character","id","catch","err","error","className","children","map","section","fields","field","_formData$section$nam","label","type","onChange","required","onClick"],"sources":["/home/mbohach/Документи/personal/tabletop/src/Character/CreateCharacter/CustomForm-component.jsx"],"sourcesContent":["import React, { useState } from \"react\";\n\nconst CustomForm = ({ sections }) => {\n  const [formData, setFormData] = useState({});\n\n  const handleInputChange = (e, sectionName) => {\n    const { name, value } = e.target;\n    setFormData((prev) => ({\n      ...prev,\n      [sectionName]: {\n        ...prev[sectionName],\n        [name]: value,\n      },\n    }));\n  };\n\n  const saveCharacter = () => {\n    const token = localStorage.getItem(\"token\"); // Retrieve token\n    fetch(\"/api/characters\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${token}`, // Include token in the header\n      },\n      body: JSON.stringify({\n        system: \"custom\",\n        sections: formData,\n      }),\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        console.log(\"Character saved:\", data);\n        window.location.href = `/character/${data.character.id}`;\n      })\n      .catch((err) => console.error(\"Error saving character:\", err));\n  };\n\n  return (\n    <div className=\"custom-form\">\n      {sections.map((section) => (\n        <div key={section.name} className=\"custom-form__section\">\n          <h2>{section.name}</h2>\n          {section.fields.map((field) => (\n            <div key={field.name} className=\"custom-form__field\">\n              <label>{field.label}</label>\n              <input\n                type={field.type}\n                name={field.name}\n                value={formData[section.name]?.[field.name] || \"\"}\n                onChange={(e) => handleInputChange(e, section.name)}\n                required={field.required}\n              />\n            </div>\n          ))}\n        </div>\n      ))}\n      <div className=\"custom-form__navigation\">\n        <button onClick={saveCharacter} className=\"save-button\">\n          Зберегти\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default CustomForm;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}