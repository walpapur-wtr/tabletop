{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{useNavigate}from\"react-router-dom\";import HeaderComponent from\"../components/Header-component\";import FooterComponent from\"../components/Footer-component\";import DiceRollerButton from\"../components/DiceRollerButton\";import CharacterCard from\"../Character/CharacterCard-component\";import\"../styles/Home-styles.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MyProfilePage=()=>{const[characters,setCharacters]=useState([]);const navigate=useNavigate();useEffect(()=>{const token=localStorage.getItem(\"token\");const username=localStorage.getItem(\"username\");if(!token||!username){navigate(\"/login\");// Redirect to login if not authenticated\nreturn;}fetch(\"/api/characters\",{method:\"GET\",headers:{Authorization:\"Bearer \".concat(token)// Include token in the header\n}}).then(res=>{if(!res.ok){throw new Error(\"Failed to fetch characters\");}return res.json();}).then(data=>{// Filter characters by the logged-in user's username\nconst userCharacters=data.filter(character=>character.user===username);setCharacters(userCharacters);}).catch(err=>console.error(\"Error fetching characters:\",err));},[navigate]);return/*#__PURE__*/_jsxs(\"div\",{className:\"home-page\",children:[/*#__PURE__*/_jsx(HeaderComponent,{}),/*#__PURE__*/_jsx(\"div\",{className:\"home-page__content\",children:/*#__PURE__*/_jsx(\"div\",{className:\"character-grid\",children:characters.map(character=>/*#__PURE__*/_jsx(CharacterCard,{character:character},character.id))})}),/*#__PURE__*/_jsx(DiceRollerButton,{}),/*#__PURE__*/_jsx(FooterComponent,{})]});};export default MyProfilePage;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","HeaderComponent","FooterComponent","DiceRollerButton","CharacterCard","jsx","_jsx","jsxs","_jsxs","MyProfilePage","characters","setCharacters","navigate","token","localStorage","getItem","username","fetch","method","headers","Authorization","concat","then","res","ok","Error","json","data","userCharacters","filter","character","user","catch","err","console","error","className","children","map","id"],"sources":["/home/mbohach/Документи/personal/tabletop/src/pages/MyProfile-page.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport HeaderComponent from \"../components/Header-component\";\nimport FooterComponent from \"../components/Footer-component\";\nimport DiceRollerButton from \"../components/DiceRollerButton\";\nimport CharacterCard from \"../Character/CharacterCard-component\";\nimport \"../styles/Home-styles.css\";\n\nconst MyProfilePage = () => {\n  const [characters, setCharacters] = useState([]);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    const token = localStorage.getItem(\"token\");\n    const username = localStorage.getItem(\"username\");\n\n    if (!token || !username) {\n      navigate(\"/login\"); // Redirect to login if not authenticated\n      return;\n    }\n\n    fetch(\"/api/characters\", {\n      method: \"GET\",\n      headers: {\n        Authorization: `Bearer ${token}`, // Include token in the header\n      },\n    })\n      .then((res) => {\n        if (!res.ok) {\n          throw new Error(\"Failed to fetch characters\");\n        }\n        return res.json();\n      })\n      .then((data) => {\n        // Filter characters by the logged-in user's username\n        const userCharacters = data.filter((character) => character.user === username);\n        setCharacters(userCharacters);\n      })\n      .catch((err) => console.error(\"Error fetching characters:\", err));\n  }, [navigate]);\n\n  return (\n    <div className=\"home-page\">\n      <HeaderComponent />\n      <div className=\"home-page__content\">\n        <div className=\"character-grid\">\n          {characters.map((character) => (\n            <CharacterCard key={character.id} character={character} />\n          ))}\n        </div>\n      </div>\n      <DiceRollerButton />\n      <FooterComponent />\n    </div>\n  );\n};\n\nexport default MyProfilePage;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAO,CAAAC,eAAe,KAAM,gCAAgC,CAC5D,MAAO,CAAAC,eAAe,KAAM,gCAAgC,CAC5D,MAAO,CAAAC,gBAAgB,KAAM,gCAAgC,CAC7D,MAAO,CAAAC,aAAa,KAAM,sCAAsC,CAChE,MAAO,2BAA2B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEnC,KAAM,CAAAC,aAAa,CAAGA,CAAA,GAAM,CAC1B,KAAM,CAACC,UAAU,CAAEC,aAAa,CAAC,CAAGZ,QAAQ,CAAC,EAAE,CAAC,CAChD,KAAM,CAAAa,QAAQ,CAAGZ,WAAW,CAAC,CAAC,CAE9BF,SAAS,CAAC,IAAM,CACd,KAAM,CAAAe,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,KAAM,CAAAC,QAAQ,CAAGF,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC,CAEjD,GAAI,CAACF,KAAK,EAAI,CAACG,QAAQ,CAAE,CACvBJ,QAAQ,CAAC,QAAQ,CAAC,CAAE;AACpB,OACF,CAEAK,KAAK,CAAC,iBAAiB,CAAE,CACvBC,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,CACPC,aAAa,WAAAC,MAAA,CAAYR,KAAK,CAAI;AACpC,CACF,CAAC,CAAC,CACCS,IAAI,CAAEC,GAAG,EAAK,CACb,GAAI,CAACA,GAAG,CAACC,EAAE,CAAE,CACX,KAAM,IAAI,CAAAC,KAAK,CAAC,4BAA4B,CAAC,CAC/C,CACA,MAAO,CAAAF,GAAG,CAACG,IAAI,CAAC,CAAC,CACnB,CAAC,CAAC,CACDJ,IAAI,CAAEK,IAAI,EAAK,CACd;AACA,KAAM,CAAAC,cAAc,CAAGD,IAAI,CAACE,MAAM,CAAEC,SAAS,EAAKA,SAAS,CAACC,IAAI,GAAKf,QAAQ,CAAC,CAC9EL,aAAa,CAACiB,cAAc,CAAC,CAC/B,CAAC,CAAC,CACDI,KAAK,CAAEC,GAAG,EAAKC,OAAO,CAACC,KAAK,CAAC,4BAA4B,CAAEF,GAAG,CAAC,CAAC,CACrE,CAAC,CAAE,CAACrB,QAAQ,CAAC,CAAC,CAEd,mBACEJ,KAAA,QAAK4B,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxB/B,IAAA,CAACL,eAAe,GAAE,CAAC,cACnBK,IAAA,QAAK8B,SAAS,CAAC,oBAAoB,CAAAC,QAAA,cACjC/B,IAAA,QAAK8B,SAAS,CAAC,gBAAgB,CAAAC,QAAA,CAC5B3B,UAAU,CAAC4B,GAAG,CAAER,SAAS,eACxBxB,IAAA,CAACF,aAAa,EAAoB0B,SAAS,CAAEA,SAAU,EAAnCA,SAAS,CAACS,EAA2B,CAC1D,CAAC,CACC,CAAC,CACH,CAAC,cACNjC,IAAA,CAACH,gBAAgB,GAAE,CAAC,cACpBG,IAAA,CAACJ,eAAe,GAAE,CAAC,EAChB,CAAC,CAEV,CAAC,CAED,cAAe,CAAAO,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}