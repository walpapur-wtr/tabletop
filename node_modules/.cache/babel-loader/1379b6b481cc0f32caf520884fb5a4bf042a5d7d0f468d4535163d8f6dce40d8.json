{"ast":null,"code":"import _objectSpread from\"/home/mbohach/\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u0438/personal/tabletop/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from\"react\";import{useParams,useNavigate}from\"react-router-dom\";import DnDForm from\"./DnDForm-component\";import PathfinderForm from\"./PathFinderForm-component\";import CallOfCthulhuForm from\"./CustomForm-component\";import SystemModal from\"./SystemModal-component\";import HeaderComponent from\"../../components/Header-component\";import FooterComponent from\"../../components/Footer-component.jsx\";import DiceRollerButton from\"../../components/DiceRollerButton.jsx\";import ModalMessage from\"../../components/ModalMessage\";import\"./CreateCharacter-styles.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CreateCharacterPage=()=>{const{system,version}=useParams();const navigate=useNavigate();const[formComponent,setFormComponent]=useState(null);const[config,setConfig]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[showLoginModal,setShowLoginModal]=useState(false);const[showSystemModal,setShowSystemModal]=useState(!system);const handleSystemSelect=(selectedSystem,selectedVersion)=>{setShowSystemModal(false);navigate(\"/create-character/\".concat(selectedSystem,\"/\").concat(selectedVersion));};const redirectToLogin=()=>{navigate(\"/login\");};useEffect(()=>{const fetchConfig=async()=>{try{console.log(\"Fetching configuration for:\",system,version);const response=await fetch(\"/api/systems/\".concat(system,\"/\").concat(version));if(!response.ok)throw new Error(\"Не вдалося завантажити конфігурацію.\");const data=await response.json();console.log(\"Configuration data received:\",data);setConfig(_objectSpread(_objectSpread({},data),{},{system,version}));// Додаємо system і version до конфігурації\nif(system===\"dnd\"){setFormComponent(()=>DnDForm);}else if(system===\"pathfinder\"){setFormComponent(()=>PathfinderForm);}else if(system===\"call-of-cthulhu\"){setFormComponent(()=>CallOfCthulhuForm);}else{throw new Error(\"Невідома система.\");}setLoading(false);}catch(err){console.error(\"Error fetching configuration:\",err);setError(err.message);setLoading(false);}};fetchConfig();},[system,version]);if(loading)return/*#__PURE__*/_jsx(\"p\",{children:\"\\u0417\\u0430\\u0432\\u0430\\u043D\\u0442\\u0430\\u0436\\u0435\\u043D\\u043D\\u044F...\"});if(error)return/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:error});if(!formComponent)return/*#__PURE__*/_jsx(\"p\",{children:\"\\u041A\\u043E\\u043C\\u043F\\u043E\\u043D\\u0435\\u043D\\u0442 \\u0444\\u043E\\u0440\\u043C\\u0438 \\u043D\\u0435 \\u0437\\u043D\\u0430\\u0439\\u0434\\u0435\\u043D\\u043E.\"});const FormComponent=formComponent;return/*#__PURE__*/_jsxs(\"div\",{className:\"create-character-page\",children:[/*#__PURE__*/_jsx(HeaderComponent,{}),showLoginModal&&/*#__PURE__*/_jsx(ModalMessage,{message:\"\\u0411\\u0443\\u0434\\u044C \\u043B\\u0430\\u0441\\u043A\\u0430, \\u0443\\u0432\\u0456\\u0439\\u0434\\u0456\\u0442\\u044C \\u0449\\u043E\\u0431 \\u0441\\u0442\\u0432\\u043E\\u0440\\u0438\\u0442\\u0438 \\u043F\\u0435\\u0440\\u0441\\u043E\\u043D\\u0430\\u0436\\u0430\",onClose:()=>setShowLoginModal(false),onConfirm:redirectToLogin}),showSystemModal?/*#__PURE__*/_jsx(SystemModal,{onClose:()=>navigate(\"/\"),onSystemSelect:handleSystemSelect}):FormComponent&&/*#__PURE__*/_jsx(FormComponent,{config:config}),/*#__PURE__*/_jsx(DiceRollerButton,{}),/*#__PURE__*/_jsx(FooterComponent,{})]});};export default CreateCharacterPage;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","DnDForm","PathfinderForm","CallOfCthulhuForm","SystemModal","HeaderComponent","FooterComponent","DiceRollerButton","ModalMessage","jsx","_jsx","jsxs","_jsxs","CreateCharacterPage","system","version","navigate","formComponent","setFormComponent","config","setConfig","loading","setLoading","error","setError","showLoginModal","setShowLoginModal","showSystemModal","setShowSystemModal","handleSystemSelect","selectedSystem","selectedVersion","concat","redirectToLogin","fetchConfig","console","log","response","fetch","ok","Error","data","json","_objectSpread","err","message","children","className","FormComponent","onClose","onConfirm","onSystemSelect"],"sources":["/home/mbohach/Документи/personal/tabletop/src/Character/CreateCharacter/CreateCharacter-page.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport DnDForm from \"./DnDForm-component\";\nimport PathfinderForm from \"./PathFinderForm-component\";\nimport CallOfCthulhuForm from \"./CustomForm-component\";\nimport SystemModal from \"./SystemModal-component\";\nimport HeaderComponent from \"../../components/Header-component\";\nimport FooterComponent from \"../../components/Footer-component.jsx\";\nimport DiceRollerButton from \"../../components/DiceRollerButton.jsx\";\nimport ModalMessage from \"../../components/ModalMessage\";\nimport \"./CreateCharacter-styles.css\";\n\nconst CreateCharacterPage = () => {\n  const { system, version } = useParams();\n  const navigate = useNavigate();\n  const [formComponent, setFormComponent] = useState(null);\n  const [config, setConfig] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [showLoginModal, setShowLoginModal] = useState(false);\n  const [showSystemModal, setShowSystemModal] = useState(!system);\n\n  const handleSystemSelect = (selectedSystem, selectedVersion) => {\n    setShowSystemModal(false);\n    navigate(`/create-character/${selectedSystem}/${selectedVersion}`);\n  };\n\n  const redirectToLogin = () => {\n    navigate(\"/login\");\n  };\n\n  useEffect(() => {\n    const fetchConfig = async () => {\n      try {\n        console.log(\"Fetching configuration for:\", system, version);\n        const response = await fetch(`/api/systems/${system}/${version}`);\n        if (!response.ok) throw new Error(\"Не вдалося завантажити конфігурацію.\");\n        const data = await response.json();\n        console.log(\"Configuration data received:\", data);\n        setConfig({ ...data, system, version }); // Додаємо system і version до конфігурації\n\n        if (system === \"dnd\") {\n          setFormComponent(() => DnDForm);\n        } else if (system === \"pathfinder\") {\n          setFormComponent(() => PathfinderForm);\n        } else if (system === \"call-of-cthulhu\") {\n          setFormComponent(() => CallOfCthulhuForm);\n        } else {\n          throw new Error(\"Невідома система.\");\n        }\n\n        setLoading(false);\n      } catch (err) {\n        console.error(\"Error fetching configuration:\", err);\n        setError(err.message);\n        setLoading(false);\n      }\n    };\n\n    fetchConfig();\n  }, [system, version]);\n\n  if (loading) return <p>Завантаження...</p>;\n  if (error) return <p className=\"error\">{error}</p>;\n  if (!formComponent) return <p>Компонент форми не знайдено.</p>;\n\n  const FormComponent = formComponent;\n  return (\n    <div className=\"create-character-page\">\n      <HeaderComponent />\n      {showLoginModal && (\n        <ModalMessage\n          message=\"Будь ласка, увійдіть щоб створити персонажа\"\n          onClose={() => setShowLoginModal(false)}\n          onConfirm={redirectToLogin}\n        />\n      )}\n      {showSystemModal ? (\n        <SystemModal\n          onClose={() => navigate(\"/\")}\n          onSystemSelect={handleSystemSelect}\n        />\n      ) : (\n        FormComponent && <FormComponent config={config} />\n      )}\n      <DiceRollerButton />\n      <FooterComponent />\n    </div>\n  );\n};\n\nexport default CreateCharacterPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}