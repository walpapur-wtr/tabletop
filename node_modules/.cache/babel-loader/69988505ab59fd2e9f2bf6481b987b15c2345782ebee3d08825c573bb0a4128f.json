{"ast":null,"code":"import React,{useState}from'react';import'./UserProfile-styles.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const EditProfile=_ref=>{let{onClose,onSave,currentUsername,currentEmail}=_ref;const[username,setUsername]=useState(currentUsername||'');const[email,setEmail]=useState(currentEmail||'');const[error,setError]=useState('');const handleSubmit=async e=>{e.preventDefault();setError('');try{const token=localStorage.getItem('token');const response=await fetch('/api/user/profile',{method:'PUT',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)},body:JSON.stringify({username,email})});const data=await response.json();if(!response.ok||!data.success){throw new Error(data.message||'Failed to update profile');}// Update local storage\nlocalStorage.setItem('username',data.username);localStorage.setItem('email',data.email);// Update parent component\nonSave({username:data.username,email:data.email});onClose();}catch(err){setError(err.message);}};return/*#__PURE__*/_jsx(\"div\",{className:\"edit-profile-modal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"edit-profile-content\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0420\\u0435\\u0434\\u0430\\u0433\\u0443\\u0432\\u0430\\u0442\\u0438 \\u043F\\u0440\\u043E\\u0444\\u0456\\u043B\\u044C\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"username\",children:\"\\u0406\\u043C'\\u044F \\u043A\\u043E\\u0440\\u0438\\u0441\\u0442\\u0443\\u0432\\u0430\\u0447\\u0430:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"username\",value:username,onChange:e=>setUsername(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",value:email,onChange:e=>setEmail(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"button-group\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"save-button\",children:\"\\u0417\\u0431\\u0435\\u0440\\u0435\\u0433\\u0442\\u0438\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"cancel-button\",onClick:onClose,children:\"\\u0421\\u043A\\u0430\\u0441\\u0443\\u0432\\u0430\\u0442\\u0438\"})]})]})]})});};export default EditProfile;","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","EditProfile","_ref","onClose","onSave","currentUsername","currentEmail","username","setUsername","email","setEmail","error","setError","handleSubmit","e","preventDefault","token","localStorage","getItem","response","fetch","method","headers","concat","body","JSON","stringify","data","json","ok","success","Error","message","setItem","err","className","children","onSubmit","htmlFor","type","id","value","onChange","target","required","onClick"],"sources":["/home/mbohach/Документи/personal/tabletop/src/components/EditProfile-component.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport './UserProfile-styles.css';\n\nconst EditProfile = ({ onClose, onSave, currentUsername, currentEmail }) => {\n    const [username, setUsername] = useState(currentUsername || '');\n    const [email, setEmail] = useState(currentEmail || '');\n    const [error, setError] = useState('');\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        setError('');\n        \n        try {\n            const token = localStorage.getItem('token');\n            const response = await fetch('/api/user/profile', {\n                method: 'PUT',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization': `Bearer ${token}`\n                },\n                body: JSON.stringify({ username, email })\n            });\n\n            const data = await response.json();\n            \n            if (!response.ok || !data.success) {\n                throw new Error(data.message || 'Failed to update profile');\n            }\n\n            // Update local storage\n            localStorage.setItem('username', data.username);\n            localStorage.setItem('email', data.email);\n            \n            // Update parent component\n            onSave({\n                username: data.username,\n                email: data.email\n            });\n            \n            onClose();\n        } catch (err) {\n            setError(err.message);\n        }\n    };\n\n    return (\n        <div className=\"edit-profile-modal\">\n            <div className=\"edit-profile-content\">\n                <h2>Редагувати профіль</h2>\n                {error && <div className=\"error-message\">{error}</div>}\n                <form onSubmit={handleSubmit}>\n                    <div className=\"form-group\">\n                        <label htmlFor=\"username\">Ім'я користувача:</label>\n                        <input\n                            type=\"text\"\n                            id=\"username\"\n                            value={username}\n                            onChange={(e) => setUsername(e.target.value)}\n                            required\n                        />\n                    </div>\n                    <div className=\"form-group\">\n                        <label htmlFor=\"email\">Email:</label>\n                        <input\n                            type=\"email\"\n                            id=\"email\"\n                            value={email}\n                            onChange={(e) => setEmail(e.target.value)}\n                            required\n                        />\n                    </div>\n                    <div className=\"button-group\">\n                        <button type=\"submit\" className=\"save-button\">Зберегти</button>\n                        <button type=\"button\" className=\"cancel-button\" onClick={onClose}>\n                            Скасувати\n                        </button>\n                    </div>\n                </form>\n            </div>\n        </div>\n    );\n};\n\nexport default EditProfile;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}