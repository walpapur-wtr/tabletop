{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{useNavigate}from\"react-router-dom\";import HeaderComponent from\"../components/Header-component\";import FooterComponent from\"../components/Footer-component\";import DiceRollerButton from\"../components/DiceRollerButton\";import CharacterCard from\"../Character/CharacterCard-component\";import SystemModal from\"../Character/CreateCharacter/SystemModal-component\";import UserProfile from\"../components/UserProfile-component\";// Імпортуємо компонент профілю\nimport\"../styles/Home-styles.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MyProfilePage=()=>{const[characters,setCharacters]=useState([]);const[isSystemModalVisible,setIsSystemModalVisible]=useState(false);const navigate=useNavigate();useEffect(()=>{const token=localStorage.getItem(\"token\");const username=localStorage.getItem(\"username\");if(!token||!username){navigate(\"/login\");// Redirect to login if not authenticated\nreturn;}const fetchCharacters=async()=>{try{const response=await fetch(\"/api/characters\",{headers:{Authorization:\"Bearer \".concat(token)}});if(!response.ok){throw new Error(\"Failed to fetch characters\");}const data=await response.json();if(data.success){setCharacters(data.characters);}else{throw new Error(data.message||\"Failed to fetch characters\");}}catch(err){console.error(\"Error fetching characters:\",err);}};fetchCharacters();},[navigate]);const handleSystemSelect=(system,version)=>{setIsSystemModalVisible(false);navigate(\"/create-character/\".concat(system,\"/\").concat(version));};const handleLogout=()=>{localStorage.removeItem(\"token\");// Remove token\nlocalStorage.removeItem(\"username\");// Remove username\nnavigate(\"/login\");// Redirect to login page\n};return/*#__PURE__*/_jsxs(\"div\",{className:\"home-page\",children:[/*#__PURE__*/_jsx(HeaderComponent,{}),/*#__PURE__*/_jsx(UserProfile,{onLogout:handleLogout}),\" \",/*#__PURE__*/_jsx(\"div\",{className:\"home-page__content\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"character-grid\",children:[characters.map(character=>/*#__PURE__*/_jsx(CharacterCard,{character:character},character.id)),/*#__PURE__*/_jsx(CharacterCard,{onAddClick:()=>setIsSystemModalVisible(true)})]})}),isSystemModalVisible&&/*#__PURE__*/_jsx(SystemModal,{onClose:()=>setIsSystemModalVisible(false),onSystemSelect:handleSystemSelect}),/*#__PURE__*/_jsx(DiceRollerButton,{}),/*#__PURE__*/_jsx(FooterComponent,{})]});};export default MyProfilePage;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","HeaderComponent","FooterComponent","DiceRollerButton","CharacterCard","SystemModal","UserProfile","jsx","_jsx","jsxs","_jsxs","MyProfilePage","characters","setCharacters","isSystemModalVisible","setIsSystemModalVisible","navigate","token","localStorage","getItem","username","fetchCharacters","response","fetch","headers","Authorization","concat","ok","Error","data","json","success","message","err","console","error","handleSystemSelect","system","version","handleLogout","removeItem","className","children","onLogout","map","character","id","onAddClick","onClose","onSystemSelect"],"sources":["/home/mbohach/Документи/personal/tabletop/src/pages/MyProfile-page.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport HeaderComponent from \"../components/Header-component\";\nimport FooterComponent from \"../components/Footer-component\";\nimport DiceRollerButton from \"../components/DiceRollerButton\";\nimport CharacterCard from \"../Character/CharacterCard-component\";\nimport SystemModal from \"../Character/CreateCharacter/SystemModal-component\";\nimport UserProfile from \"../components/UserProfile-component\"; // Імпортуємо компонент профілю\nimport \"../styles/Home-styles.css\";\n\nconst MyProfilePage = () => {\n  const [characters, setCharacters] = useState([]);\n  const [isSystemModalVisible, setIsSystemModalVisible] = useState(false);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    const token = localStorage.getItem(\"token\");\n    const username = localStorage.getItem(\"username\");\n\n    if (!token || !username) {\n      navigate(\"/login\"); // Redirect to login if not authenticated\n      return;\n    }\n\n    const fetchCharacters = async () => {\n      try {\n        const response = await fetch(\"/api/characters\", {\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n        });\n\n        if (!response.ok) {\n          throw new Error(\"Failed to fetch characters\");\n        }\n\n        const data = await response.json();\n        if (data.success) {\n          setCharacters(data.characters);\n        } else {\n          throw new Error(data.message || \"Failed to fetch characters\");\n        }\n      } catch (err) {\n        console.error(\"Error fetching characters:\", err);\n      }\n    };\n\n    fetchCharacters();\n  }, [navigate]);\n\n  const handleSystemSelect = (system, version) => {\n    setIsSystemModalVisible(false);\n    navigate(`/create-character/${system}/${version}`);\n  };\n\n  const handleLogout = () => {\n    localStorage.removeItem(\"token\"); // Remove token\n    localStorage.removeItem(\"username\"); // Remove username\n    navigate(\"/login\"); // Redirect to login page\n  };\n\n  return (\n    <div className=\"home-page\">\n      <HeaderComponent />\n      <UserProfile onLogout={handleLogout} /> {/* Додаємо компонент профілю */}\n      <div className=\"home-page__content\">\n        <div className=\"character-grid\">\n          {characters.map((character) => (\n            <CharacterCard key={character.id} character={character} />\n          ))}\n          <CharacterCard onAddClick={() => setIsSystemModalVisible(true)} />\n        </div>\n      </div>\n      {isSystemModalVisible && (\n        <SystemModal\n          onClose={() => setIsSystemModalVisible(false)}\n          onSystemSelect={handleSystemSelect}\n        />\n      )}\n      <DiceRollerButton />\n      <FooterComponent />\n    </div>\n  );\n};\n\nexport default MyProfilePage;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAO,CAAAC,eAAe,KAAM,gCAAgC,CAC5D,MAAO,CAAAC,eAAe,KAAM,gCAAgC,CAC5D,MAAO,CAAAC,gBAAgB,KAAM,gCAAgC,CAC7D,MAAO,CAAAC,aAAa,KAAM,sCAAsC,CAChE,MAAO,CAAAC,WAAW,KAAM,oDAAoD,CAC5E,MAAO,CAAAC,WAAW,KAAM,qCAAqC,CAAE;AAC/D,MAAO,2BAA2B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEnC,KAAM,CAAAC,aAAa,CAAGA,CAAA,GAAM,CAC1B,KAAM,CAACC,UAAU,CAAEC,aAAa,CAAC,CAAGd,QAAQ,CAAC,EAAE,CAAC,CAChD,KAAM,CAACe,oBAAoB,CAAEC,uBAAuB,CAAC,CAAGhB,QAAQ,CAAC,KAAK,CAAC,CACvE,KAAM,CAAAiB,QAAQ,CAAGhB,WAAW,CAAC,CAAC,CAE9BF,SAAS,CAAC,IAAM,CACd,KAAM,CAAAmB,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,KAAM,CAAAC,QAAQ,CAAGF,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC,CAEjD,GAAI,CAACF,KAAK,EAAI,CAACG,QAAQ,CAAE,CACvBJ,QAAQ,CAAC,QAAQ,CAAC,CAAE;AACpB,OACF,CAEA,KAAM,CAAAK,eAAe,CAAG,KAAAA,CAAA,GAAY,CAClC,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,iBAAiB,CAAE,CAC9CC,OAAO,CAAE,CACPC,aAAa,WAAAC,MAAA,CAAYT,KAAK,CAChC,CACF,CAAC,CAAC,CAEF,GAAI,CAACK,QAAQ,CAACK,EAAE,CAAE,CAChB,KAAM,IAAI,CAAAC,KAAK,CAAC,4BAA4B,CAAC,CAC/C,CAEA,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAP,QAAQ,CAACQ,IAAI,CAAC,CAAC,CAClC,GAAID,IAAI,CAACE,OAAO,CAAE,CAChBlB,aAAa,CAACgB,IAAI,CAACjB,UAAU,CAAC,CAChC,CAAC,IAAM,CACL,KAAM,IAAI,CAAAgB,KAAK,CAACC,IAAI,CAACG,OAAO,EAAI,4BAA4B,CAAC,CAC/D,CACF,CAAE,MAAOC,GAAG,CAAE,CACZC,OAAO,CAACC,KAAK,CAAC,4BAA4B,CAAEF,GAAG,CAAC,CAClD,CACF,CAAC,CAEDZ,eAAe,CAAC,CAAC,CACnB,CAAC,CAAE,CAACL,QAAQ,CAAC,CAAC,CAEd,KAAM,CAAAoB,kBAAkB,CAAGA,CAACC,MAAM,CAAEC,OAAO,GAAK,CAC9CvB,uBAAuB,CAAC,KAAK,CAAC,CAC9BC,QAAQ,sBAAAU,MAAA,CAAsBW,MAAM,MAAAX,MAAA,CAAIY,OAAO,CAAE,CAAC,CACpD,CAAC,CAED,KAAM,CAAAC,YAAY,CAAGA,CAAA,GAAM,CACzBrB,YAAY,CAACsB,UAAU,CAAC,OAAO,CAAC,CAAE;AAClCtB,YAAY,CAACsB,UAAU,CAAC,UAAU,CAAC,CAAE;AACrCxB,QAAQ,CAAC,QAAQ,CAAC,CAAE;AACtB,CAAC,CAED,mBACEN,KAAA,QAAK+B,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBlC,IAAA,CAACP,eAAe,GAAE,CAAC,cACnBO,IAAA,CAACF,WAAW,EAACqC,QAAQ,CAAEJ,YAAa,CAAE,CAAC,IAAC,cACxC/B,IAAA,QAAKiC,SAAS,CAAC,oBAAoB,CAAAC,QAAA,cACjChC,KAAA,QAAK+B,SAAS,CAAC,gBAAgB,CAAAC,QAAA,EAC5B9B,UAAU,CAACgC,GAAG,CAAEC,SAAS,eACxBrC,IAAA,CAACJ,aAAa,EAAoByC,SAAS,CAAEA,SAAU,EAAnCA,SAAS,CAACC,EAA2B,CAC1D,CAAC,cACFtC,IAAA,CAACJ,aAAa,EAAC2C,UAAU,CAAEA,CAAA,GAAMhC,uBAAuB,CAAC,IAAI,CAAE,CAAE,CAAC,EAC/D,CAAC,CACH,CAAC,CACLD,oBAAoB,eACnBN,IAAA,CAACH,WAAW,EACV2C,OAAO,CAAEA,CAAA,GAAMjC,uBAAuB,CAAC,KAAK,CAAE,CAC9CkC,cAAc,CAAEb,kBAAmB,CACpC,CACF,cACD5B,IAAA,CAACL,gBAAgB,GAAE,CAAC,cACpBK,IAAA,CAACN,eAAe,GAAE,CAAC,EAChB,CAAC,CAEV,CAAC,CAED,cAAe,CAAAS,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}