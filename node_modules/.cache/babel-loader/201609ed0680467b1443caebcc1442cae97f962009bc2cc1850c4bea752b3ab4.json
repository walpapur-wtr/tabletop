{"ast":null,"code":"import _objectSpread from\"/home/mbohach/\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u0438/personal/tabletop/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from\"react\";import{useParams}from\"react-router-dom\";import DnDForm from\"./DnDForm-component\";import PathfinderForm from\"./PathFinderForm-component\";import CallOfCthulhuForm from\"./CustomForm-component\";import HeaderComponent from\"../../components/Header-component\";import FooterComponent from\"../../components/Footer-component.jsx\";import DiceRollerButton from\"../../components/DiceRollerButton.jsx\";import\"./CreateCharacter-styles.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CreateCharacterPage=()=>{const{system,version}=useParams();const[formComponent,setFormComponent]=useState(null);const[config,setConfig]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[formData,setFormData]=useState({});useEffect(()=>{const fetchConfig=async()=>{try{console.log(\"Fetching configuration for:\",system,version);const response=await fetch(\"/api/systems/\".concat(system,\"/\").concat(version));if(!response.ok)throw new Error(\"Не вдалося завантажити конфігурацію.\");const data=await response.json();console.log(\"Configuration data received:\",data);setConfig(_objectSpread(_objectSpread({},data),{},{system,version}));// Додаємо system і version до конфігурації\nif(system===\"dnd\"){setFormComponent(()=>DnDForm);}else if(system===\"pathfinder\"){setFormComponent(()=>PathfinderForm);}else if(system===\"call-of-cthulhu\"){setFormComponent(()=>CallOfCthulhuForm);}else{throw new Error(\"Невідома система.\");}setLoading(false);}catch(err){console.error(\"Error fetching configuration:\",err);setError(err.message);setLoading(false);}};fetchConfig();},[system,version]);const saveCharacter=async data=>{try{const response=await fetch(\"/api/characters\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(_objectSpread(_objectSpread({},data),{},{image:formData.image// Include image in the payload\n}))});if(!response.ok)throw new Error(\"Не вдалося зберегти персонажа.\");console.log(\"Character saved successfully.\");}catch(err){console.error(\"Error saving character:\",err);}};if(loading)return/*#__PURE__*/_jsx(\"p\",{children:\"\\u0417\\u0430\\u0432\\u0430\\u043D\\u0442\\u0430\\u0436\\u0435\\u043D\\u043D\\u044F...\"});if(error)return/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:error});if(!formComponent)return/*#__PURE__*/_jsx(\"p\",{children:\"\\u041A\\u043E\\u043C\\u043F\\u043E\\u043D\\u0435\\u043D\\u0442 \\u0444\\u043E\\u0440\\u043C\\u0438 \\u043D\\u0435 \\u0437\\u043D\\u0430\\u0439\\u0434\\u0435\\u043D\\u043E.\"});const FormComponent=formComponent;return/*#__PURE__*/_jsxs(\"div\",{className:\"create-character-page\",children:[/*#__PURE__*/_jsx(HeaderComponent,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"character-form__field\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"image\",children:\"\\u0417\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u043D\\u044F \\u043F\\u0435\\u0440\\u0441\\u043E\\u043D\\u0430\\u0436\\u0430\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"image\",accept:\"image/*\",onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{image:e.target.files[0]}))}),/*#__PURE__*/_jsx(\"input\",{type:\"url\",placeholder:\"\\u0430\\u0431\\u043E \\u0432\\u0441\\u0442\\u0430\\u0432\\u0442\\u0435 \\u043F\\u043E\\u0441\\u0438\\u043B\\u0430\\u043D\\u043D\\u044F\",onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{image:e.target.value}))})]}),/*#__PURE__*/_jsx(FormComponent,{config:config}),/*#__PURE__*/_jsx(DiceRollerButton,{}),/*#__PURE__*/_jsx(FooterComponent,{})]});};export default CreateCharacterPage;","map":{"version":3,"names":["React","useState","useEffect","useParams","DnDForm","PathfinderForm","CallOfCthulhuForm","HeaderComponent","FooterComponent","DiceRollerButton","jsx","_jsx","jsxs","_jsxs","CreateCharacterPage","system","version","formComponent","setFormComponent","config","setConfig","loading","setLoading","error","setError","formData","setFormData","fetchConfig","console","log","response","fetch","concat","ok","Error","data","json","_objectSpread","err","message","saveCharacter","method","headers","body","JSON","stringify","image","children","className","FormComponent","htmlFor","type","id","accept","onChange","e","target","files","placeholder","value"],"sources":["/home/mbohach/Документи/personal/tabletop/src/Character/CreateCharacter/CreateCharacter-page.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport DnDForm from \"./DnDForm-component\";\nimport PathfinderForm from \"./PathFinderForm-component\";\nimport CallOfCthulhuForm from \"./CustomForm-component\";\nimport HeaderComponent from \"../../components/Header-component\";\nimport FooterComponent from \"../../components/Footer-component.jsx\";\nimport DiceRollerButton from \"../../components/DiceRollerButton.jsx\";\nimport \"./CreateCharacter-styles.css\";\n\nconst CreateCharacterPage = () => {\n  const { system, version } = useParams();\n  const [formComponent, setFormComponent] = useState(null);\n  const [config, setConfig] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [formData, setFormData] = useState({});\n\n  useEffect(() => {\n    const fetchConfig = async () => {\n      try {\n        console.log(\"Fetching configuration for:\", system, version);\n        const response = await fetch(`/api/systems/${system}/${version}`);\n        if (!response.ok) throw new Error(\"Не вдалося завантажити конфігурацію.\");\n        const data = await response.json();\n        console.log(\"Configuration data received:\", data);\n        setConfig({ ...data, system, version }); // Додаємо system і version до конфігурації\n\n        if (system === \"dnd\") {\n          setFormComponent(() => DnDForm);\n        } else if (system === \"pathfinder\") {\n          setFormComponent(() => PathfinderForm);\n        } else if (system === \"call-of-cthulhu\") {\n          setFormComponent(() => CallOfCthulhuForm);\n        } else {\n          throw new Error(\"Невідома система.\");\n        }\n\n        setLoading(false);\n      } catch (err) {\n        console.error(\"Error fetching configuration:\", err);\n        setError(err.message);\n        setLoading(false);\n      }\n    };\n\n    fetchConfig();\n  }, [system, version]);\n\n  const saveCharacter = async (data) => {\n    try {\n      const response = await fetch(\"/api/characters\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          ...data,\n          image: formData.image, // Include image in the payload\n        }),\n      });\n      if (!response.ok) throw new Error(\"Не вдалося зберегти персонажа.\");\n      console.log(\"Character saved successfully.\");\n    } catch (err) {\n      console.error(\"Error saving character:\", err);\n    }\n  };\n\n  if (loading) return <p>Завантаження...</p>;\n  if (error) return <p className=\"error\">{error}</p>;\n  if (!formComponent) return <p>Компонент форми не знайдено.</p>;\n\n  const FormComponent = formComponent;\n  return (\n    <div className=\"create-character-page\">\n      <HeaderComponent />\n      <div className=\"character-form__field\">\n        <label htmlFor=\"image\">Зображення персонажа</label>\n        <input\n          type=\"file\"\n          id=\"image\"\n          accept=\"image/*\"\n          onChange={(e) => setFormData({ ...formData, image: e.target.files[0] })}\n        />\n        <input\n          type=\"url\"\n          placeholder=\"або вставте посилання\"\n          onChange={(e) => setFormData({ ...formData, image: e.target.value })}\n        />\n      </div>\n      <FormComponent config={config} />\n      <DiceRollerButton />\n      <FooterComponent />\n    </div>\n  );\n};\n\nexport default CreateCharacterPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}