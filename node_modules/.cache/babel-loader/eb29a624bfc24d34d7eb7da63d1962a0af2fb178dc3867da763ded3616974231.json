{"ast":null,"code":"import _objectSpread from\"/home/mbohach/\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u0438/personal/tabletop/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from\"react\";import{useParams}from\"react-router-dom\";import DnDForm from\"./DnDForm-component\";import PathfinderForm from\"./PathFinderForm-component\";import CallOfCthulhuForm from\"./CustomForm-component\";import HeaderComponent from\"../../components/Header-component\";import FooterComponent from\"../../components/Footer-component.jsx\";import DiceRollerButton from\"../../components/DiceRollerButton.jsx\";import ModalMessage from\"../../components/ModalMessage\";import\"./CreateCharacter-styles.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CreateCharacterPage=()=>{const{system,version}=useParams();const[formComponent,setFormComponent]=useState(null);const[config,setConfig]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[showLoginModal,setShowLoginModal]=useState(false);const redirectToLogin=()=>{window.location.href=\"/login\";};useEffect(()=>{const fetchConfig=async()=>{try{console.log(\"Fetching configuration for:\",system,version);const response=await fetch(\"/api/systems/\".concat(system,\"/\").concat(version));if(!response.ok)throw new Error(\"Не вдалося завантажити конфігурацію.\");const data=await response.json();console.log(\"Configuration data received:\",data);setConfig(_objectSpread(_objectSpread({},data),{},{system,version}));// Додаємо system і version до конфігурації\nif(system===\"dnd\"){setFormComponent(()=>DnDForm);}else if(system===\"pathfinder\"){setFormComponent(()=>PathfinderForm);}else if(system===\"call-of-cthulhu\"){setFormComponent(()=>CallOfCthulhuForm);}else{throw new Error(\"Невідома система.\");}setLoading(false);}catch(err){console.error(\"Error fetching configuration:\",err);setError(err.message);setLoading(false);}};fetchConfig();},[system,version]);if(loading)return/*#__PURE__*/_jsx(\"p\",{children:\"\\u0417\\u0430\\u0432\\u0430\\u043D\\u0442\\u0430\\u0436\\u0435\\u043D\\u043D\\u044F...\"});if(error)return/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:error});if(!formComponent)return/*#__PURE__*/_jsx(\"p\",{children:\"\\u041A\\u043E\\u043C\\u043F\\u043E\\u043D\\u0435\\u043D\\u0442 \\u0444\\u043E\\u0440\\u043C\\u0438 \\u043D\\u0435 \\u0437\\u043D\\u0430\\u0439\\u0434\\u0435\\u043D\\u043E.\"});const FormComponent=formComponent;return/*#__PURE__*/_jsxs(\"div\",{className:\"create-character-page\",children:[/*#__PURE__*/_jsx(HeaderComponent,{}),showLoginModal&&/*#__PURE__*/_jsx(ModalMessage,{message:\"Please log in to create a character.\",onClose:()=>setShowLoginModal(false),onConfirm:redirectToLogin}),/*#__PURE__*/_jsx(FormComponent,{config:config}),/*#__PURE__*/_jsx(DiceRollerButton,{}),/*#__PURE__*/_jsx(FooterComponent,{})]});};export default CreateCharacterPage;","map":{"version":3,"names":["React","useState","useEffect","useParams","DnDForm","PathfinderForm","CallOfCthulhuForm","HeaderComponent","FooterComponent","DiceRollerButton","ModalMessage","jsx","_jsx","jsxs","_jsxs","CreateCharacterPage","system","version","formComponent","setFormComponent","config","setConfig","loading","setLoading","error","setError","showLoginModal","setShowLoginModal","redirectToLogin","window","location","href","fetchConfig","console","log","response","fetch","concat","ok","Error","data","json","_objectSpread","err","message","children","className","FormComponent","onClose","onConfirm"],"sources":["/home/mbohach/Документи/personal/tabletop/src/Character/CreateCharacter/CreateCharacter-page.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport DnDForm from \"./DnDForm-component\";\nimport PathfinderForm from \"./PathFinderForm-component\";\nimport CallOfCthulhuForm from \"./CustomForm-component\";\nimport HeaderComponent from \"../../components/Header-component\";\nimport FooterComponent from \"../../components/Footer-component.jsx\";\nimport DiceRollerButton from \"../../components/DiceRollerButton.jsx\";\nimport ModalMessage from \"../../components/ModalMessage\";\nimport \"./CreateCharacter-styles.css\";\n\nconst CreateCharacterPage = () => {\n  const { system, version } = useParams();\n  const [formComponent, setFormComponent] = useState(null);\n  const [config, setConfig] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [showLoginModal, setShowLoginModal] = useState(false);\n\n  const redirectToLogin = () => {\n    window.location.href = \"/login\";\n  };\n\n  useEffect(() => {\n    const fetchConfig = async () => {\n      try {\n        console.log(\"Fetching configuration for:\", system, version);\n        const response = await fetch(`/api/systems/${system}/${version}`);\n        if (!response.ok) throw new Error(\"Не вдалося завантажити конфігурацію.\");\n        const data = await response.json();\n        console.log(\"Configuration data received:\", data);\n        setConfig({ ...data, system, version }); // Додаємо system і version до конфігурації\n\n        if (system === \"dnd\") {\n          setFormComponent(() => DnDForm);\n        } else if (system === \"pathfinder\") {\n          setFormComponent(() => PathfinderForm);\n        } else if (system === \"call-of-cthulhu\") {\n          setFormComponent(() => CallOfCthulhuForm);\n        } else {\n          throw new Error(\"Невідома система.\");\n        }\n\n        setLoading(false);\n      } catch (err) {\n        console.error(\"Error fetching configuration:\", err);\n        setError(err.message);\n        setLoading(false);\n      }\n    };\n\n    fetchConfig();\n  }, [system, version]);\n\n  if (loading) return <p>Завантаження...</p>;\n  if (error) return <p className=\"error\">{error}</p>;\n  if (!formComponent) return <p>Компонент форми не знайдено.</p>;\n\n  const FormComponent = formComponent;\n  return (\n    <div className=\"create-character-page\">\n      <HeaderComponent />\n      {showLoginModal && (\n        <ModalMessage\n          message=\"Please log in to create a character.\"\n          onClose={() => setShowLoginModal(false)}\n          onConfirm={redirectToLogin}\n        />\n      )}\n      <FormComponent config={config} />\n      <DiceRollerButton />\n      <FooterComponent />\n    </div>\n  );\n};\n\nexport default CreateCharacterPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}